# 프로세스 간 통신

## 마이크로서비스 아키텍처 IPC 개요
### 상호 작용 스타일
- 일대일
- 일대다
- 동기
- 비동기
### 마이크로서비스 API 정의  
### API 발전시키기
#### 시맨틱 버저닝
- MAJOR : 하위 호환되지 않는 변경분을 API에 적용 시  
- MINOR : 하위 호환되는 변경분을 API에 적용 시  
- PATCH : 하위 호환되는 오류 수정 시  
### 메시지 포맷
#### 텍스트 메시지 포맷
- json
- xml
- etc
```aidl
사람이 식별 가능하지만 메시지가 다소 길다. 특히 xml....  
```
#### 이진 메시지 포맷
- Protocol Buffer 
- Avro

## 동기 RPI 패턴 응용 통신  
### 동기 RPI 패턴 : REST
REST는 대부분 HTTP로 소통하는 IPC  
#### REST 성숙도 모델  
- 레벨 0 : 유일한 URL end-point에 HTTP POST 요청을 하여 서비스를 호출 -> 어떤 액션을 수행? 그 대상은 무엇인지? 지징
- 레벨 1 : 서비스는 리소스 개념을 지원, 클라이언트는 수행할 액션과 매개변수가 지정된 POST 요청
- 레벨 2 : 서비스는 HTTP method를 이용하여 액션을 수행(GET : 조회, POST : 생성, PUT : 수정)
- 레벨 3 : HATEOAS에 기반하여 설계  

#### REST의 장단점
장점  
- 단순하고 익숙
- 브라우저나 CURL을 사용하여 HTTP API를 간편하게 테스트 가능
- 요청/응답 스타일의 통신을 직접 지원
- HTTP는 바아화벽 친화적
- 중간 브로커가 불필요  

단점
- 요청/응답 스타일의 통신만 지원
- 가용성이 떨어짐
- 서비스 인스턴스의 위치(URL)를 클라이언트가 알고 있어야함
- 요청 한 번으로 여러 리소스를 가져오기 어려움
- 다중 업데이트 작업을 HTTP 동사에 매핑하기 어려움

### 부분 실패 처리: 회로 차단기(Circuit Breaker) 패턴
#### 견고한 RPI 프록시 설계
- 네트워크 타임아웃
- 미처리 요청(Outstanding request)
- 회로 차단기(Circuit Breaker) 패턴


